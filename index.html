<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Punk Globe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  https://unpkg.com/three/build/three.min.js
  https://unpkg.com/globe.gl/dist/globe.gl.min.js

  <style>
    html, body { margin: 0; height: 100%; overflow: hidden; background:#000; }
    #globe-container { width: 100vw; height: 100vh; }

    .gg-tooltip {
      font-family: Arial, sans-serif;
      background: rgba(20,20,20,0.9);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      border: 1px solid rgba(255,255,255,0.2);
      max-width: 220px;
      pointer-events: none;
    }
    .gg-tooltip a { color: #ffd35a; }
  </style>
</head>

<body>
  <div id="globe-container"></div>

  <script>
    const bandMap = {
      SWE: { country: "Sweden", band: "Refused", link: "https://en.wikipedia.org/wiki/Refused" },
      USA: { country: "USA", band: "Dead Kennedys", link: "https://en.wikipedia.org/wiki/Dead_Kennedys" },
      GBR: { country: "UK", band: "The Clash", link: "https://en.wikipedia.org/wiki/The_Clash" }
    };

    const container = document.getElementById('globe-container');
    const globe = Globe()
      .globeImageUrl('//unpkg.com/three-globe/example/img/earth-dark.jpg')
      .bumpImageUrl('//unpkg.com/three-globe/example/img/earth-topology.png')
      .backgroundColor('#000')(container);

    const controls = globe.controls();
    controls.autoRotate = true;
    controls.autoRotateSpeed = 0.7;

    fetch('//unpkg.com/three-globe/example/datasets/ne_110m_admin_0_countries.geojson')
      .then(res => res.json())
      .then(countries => {
        globe
          .polygonsData(countries.features)
          .polygonAltitude(d => 0.01)
          .polygonCapColor(d => bandMap[d.properties.ISO_A3] ? "rgba(255,80,80,0.9)" : "rgba(255,255,255,0.15)")
          .polygonLabel(d => {
            const iso = d.properties.ISO_A3;
            const info = bandMap[iso];
            const name = d.properties.ADMIN;

            if (!info) {
              return `<div class="gg-tooltip"><b>${name}</b><br>Inget band ännu</div>`;
            }

            return `
              <div class="gg-tooltip">
                <b>${name}</b><br>
                Band: <b>${info.band}</b><br>
                ${info.link}Mer info →</a>
              </div>
            `;
          })
          .onPolygonHover(hoverD => {
            globe
              .polygonAltitude(d => d === hoverD ? 0.06 : 0.01)
              .polygonCapColor(d => {
                if (d === hoverD) return 'rgba(255,220,80,0.9)';
                return bandMap[d.properties.ISO_A3] ? "rgba(255,80,80,0.9)" : "rgba(255,255,255,0.15)";
              });
            container.style.cursor = hoverD ? 'pointer' : 'grab';
          })
          .onPolygonClick(d => {
            const info = bandMap[d.properties.ISO_A3];
            if (info) window.open(info.link);
          });
      });
  </script>
</body>
</html>
